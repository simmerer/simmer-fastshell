/*!
 * simmer
 * Signature creative & technical work.
 * https://simmer.ooo
 * @author David Simmer
 * @version 5.0.0
 * Copyright 2020. CC BY-NC-ND licensed.
 */
function _toConsumableArray(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function changeFavicon(t){var e=document.createElement("link"),n=document.getElementById("dynamic-favicon");e.id="dynamic-favicon",e.rel="shortcut icon",e.href="/assets/img/favicons/favicon-"+t+".ico",n&&document.head.removeChild(n),document.head.appendChild(e)}function $$(t,e){var n=Array.prototype.slice.call((e||document).querySelectorAll(t));return n}function addBodyClass(t){var e=document.querySelector("body");e.classList.add(t)}function removeBodyClass(t){var e=document.querySelector("body");e.classList.remove(t)}function attachHoverListener(t){t.addEventListener("mouseenter",function(t){var e=t.target.parentNode.classList[0];addBodyClass("projects-hover"),addBodyClass("projects--"+e+"-hover")}),t.addEventListener("mouseleave",function(t){var e=t.target.parentNode.classList[0];removeBodyClass("projects-hover"),removeBodyClass("projects--"+e+"-hover")})}function addProjectHovers(){var t=document.querySelector("#project-list"),e=$$("a",t);e.forEach(function(t){attachHoverListener(t)})}function run(){var t=document.querySelectorAll(".rellax");if(t.length>0){new Rellax(".rellax")}addProjectHovers();var e=[];Barba.Pjax.Dom.wrapperId="bw",Barba.Pjax.Dom.containerClass="bc",Barba.Pjax.start(),Barba.Prefetch.init();var n=Barba.BaseTransition.extend({start:function(){Promise.all([this.newContainerLoading,this.fadeOut()]).then(this.fadeIn.bind(this))},fadeOut:function(){var t=Barba.Utils.deferred();return this.oldContainer.classList.add("fade-out"),t.resolve(),t.promise},fadeIn:function(){var t=this.newContainer,n=document.querySelector("body");n.classList=e;var o=[].concat(_toConsumableArray(e)),i=o.filter(function(t){return/project-/.test(t)})[0];if(i){var s=i.substring("project-".length);changeFavicon(s)}else changeFavicon("home");this.oldContainer.classList.add("hide"),t.classList.add("fade-in"),window.scrollTo(0,0),this.done()}});Barba.Pjax.getTransition=function(){return n},Barba.Dispatcher.on("newPageReady",function(t,n,o,i){var s=i.replace(/(<\/?)body( .+?)?>/gi,"$1notBody$2>"),r=document.createRange().createContextualFragment(s);e=r.querySelector("notBody").classList}),Barba.Dispatcher.on("transitionCompleted",function(){var t=document.querySelectorAll(".rellax");if(t.length>0){new Rellax(".rellax")}addProjectHovers(),setTimeout(function(){var t=document.querySelector(".brand a");t.blur()},1250)})}(function(){var t,e;this.Harvey=function(){function n(){}return n.states={},n.attach=function(e,n){var o;return this.states.hasOwnProperty(e)||(this.states[e]=[],this._add_css_for(e)),o=new t(e,null!=n?n.setup:void 0,null!=n?n.on:void 0,null!=n?n.off:void 0),this.states[e].length||this._watch_query(e),this.states[e].push(o),this._window_matchmedia(e).matches&&this._update_states([o],!0),o},n.detach=function(t){var e,n,o,i,s,r;for(s=this.states[t.condition],r=[],e=o=0,i=s.length;o<i;e=++o)n=s[e],t===n?r.push(this.states[n.condition][e]=void 0):r.push(void 0);return r},n._watch_query=function(t){var e=this;return this._window_matchmedia(t).addListener(function(n){return e._update_states(e.states[t],n.matches)})},n._update_states=function(t,e){var n,o,i,s;for(s=[],o=0,i=t.length;o<i;o++)n=t[o],e?s.push(n.activate()):s.push(n.deactivate());return s},n._mediaList={},n._window_matchmedia=function(t){return window.matchMedia&&"addListener"in window.matchMedia("all")?(t in this._mediaList||(this._mediaList[t]=window.matchMedia(t)),this._mediaList[t]):(this._listening||this._listen(),t in this._mediaList||(this._mediaList[t]=new e(t)),this._mediaList[t])},n._listen=function(){var t,e=this;return t=window.addEventListener||window.attachEvent,t("resize",function(){var t,n,o,i;o=e._mediaList,i=[];for(n in o)t=o[n],i.push(t._process());return i}),t("orientationChange",function(){var t,n,o,i;o=e._mediaList,i=[];for(n in o)t=o[n],i.push(t._process());return i}),this._listening=!0},n._add_css_for=function(t){if(this.style||(this.style=document.createElement("style"),this.style.setAttribute("type","text/css"),document.getElementsByTagName("head")[0].appendChild(this.style)),t="@media "+t+" {.harvey-test{}}",!this.style.styleSheet)return this.style.appendChild(document.createTextNode(t))},n}(),t=function(){function t(t,e,n,o){this.condition=t,this.setup=e,this.on=n,this.off=o}return t.prototype.active=!1,t.prototype.is_setup=!1,t.prototype.activate=function(){if(!this.active)return this.is_setup||("function"==typeof this.setup&&this.setup(),this.is_setup=!0),"function"==typeof this.on&&this.on(),this.active=!0},t.prototype.deactivate=function(){if(this.active)return"function"==typeof this.off&&this.off(),this.active=!1},t}(),e=function(){function t(t){this.media=t,this._listeners=[],this.matches=this._matches()}return t.prototype.addListener=function(t){this._listeners.push(t)},t.prototype._process=function(){var t,e,n,o,i,s;if(e=this._matches(),this.matches!==e){for(this.matches=e,i=this._listeners,s=[],n=0,o=i.length;n<o;n++)t=i[n],s.push(t(this));return s}},t.prototype._matches=function(){return this._tester||this._get_tester(),this._tester.innerHTML='&shy;<style media="'+this.media+'">#harvey-mq-test{width:42px;}</style>',this._tester.removeChild(this._tester.firstChild),42===this._tester.offsetWidth},t.prototype._get_tester=function(){if(this._tester=document.getElementById("harvey-mq-test"),!this._tester)return this._build_tester()},t.prototype._build_tester=function(){return this._tester=document.createElement("div"),this._tester.id="harvey-mq-test",this._tester.style.cssText="position:absolute;top:-100em",document.body.insertBefore(this._tester,document.body.firstChild)},t}()}).call(this),function(t,e){"function"==typeof define&&define.amd?define([],e):"object"==typeof module&&module.exports?module.exports=e():t.Rellax=e()}(this,function(){var t=function(e,n){"use strict";var o=Object.create(t.prototype),i=0,s=0,r=0,a=0,d=[],c=!1,u=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame||function(t){setTimeout(t,1e3/60)},l=window.transformProp||function(){var t=document.createElement("div");if(null==t.style.transform){var e=["Webkit","Moz","ms"];for(var n in e)if(void 0!==t.style[e[n]+"Transform"])return e[n]+"Transform"}return"transform"}(),h=function(t,e,n){return t<=e?e:t>=n?n:t};o.options={speed:-2,center:!1,round:!0,vertical:!0,horizontal:!1,callback:function(){}},n&&Object.keys(n).forEach(function(t){o.options[t]=n[t]}),o.options.speed=h(o.options.speed,-10,10),e||(e=".rellax");var f=document.querySelectorAll(e);if(!(f.length>0))throw new Error("The elements you're trying to select don't exist.");o.elems=f;var m=function(){s=window.innerHeight,a=window.innerWidth,v();for(var t=0;t<o.elems.length;t++){var e=p(o.elems[t]);d.push(e)}window.addEventListener("resize",function(){w()}),_(),w()},p=function(t){var e=t.getAttribute("data-rellax-percentage"),n=t.getAttribute("data-rellax-speed"),i=t.getAttribute("data-rellax-zindex")||0,r=o.options.vertical&&(e||o.options.center)?window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop:0,d=o.options.horizontal&&(e||o.options.center)?window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft:0,c=r+t.getBoundingClientRect().top,u=t.clientHeight||t.offsetHeight||t.scrollHeight,l=d+t.getBoundingClientRect().left,f=t.clientWidth||t.offsetWidth||t.scrollWidth,m=e?e:(r-c+s)/(u+s),p=e?e:(d-l+a)/(f+a);o.options.center&&(p=.5,m=.5);var v=n?h(n,-10,10):o.options.speed;(e||o.options.center)&&(v=h(n||o.options.speed,-5,5));var _=y(p,m,v),w=t.style.cssText,g="";if(w.indexOf("transform")>=0){var b=w.indexOf("transform"),x=w.slice(b),L=x.indexOf(";");g=L?" "+x.slice(11,L).replace(/\s/g,""):" "+x.slice(11).replace(/\s/g,"")}return{baseX:_.x,baseY:_.y,top:c,left:l,height:u,width:f,speed:v,style:w,transform:g,zindex:i}},v=function(){var t=i,e=r;return i=void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop,r=void 0!==window.pageXOffset?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft,!(t==i||!o.options.vertical)||!(e==r||!o.options.horizontal)},y=function(t,e,n){var i={},s=n*(100*(1-t)),r=n*(100*(1-e));return i.x=o.options.round?Math.round(s):Math.round(100*s)/100,i.y=o.options.round?Math.round(r):Math.round(100*r)/100,i},_=function(){v()&&c===!1&&w(),u(_)},w=function(){for(var t=0;t<o.elems.length;t++){var e=(i-d[t].top+s)/(d[t].height+s),n=(r-d[t].left+a)/(d[t].width+a),c=y(n,e,d[t].speed),u=c.y-d[t].baseY,h=c.x-d[t].baseX,f=d[t].zindex,m="translate3d("+(o.options.horizontal?h:"0")+"px,"+(o.options.vertical?u:"0")+"px,"+f+"px) "+d[t].transform;o.elems[t].style[l]=m}o.options.callback(c)};return o.destroy=function(){for(var t=0;t<o.elems.length;t++)o.elems[t].style.cssText=d[t].style;c=!0},m(),o};return t}),document.head||(document.head=document.getElementsByTagName("head")[0]),"loading"!==document.readyState?run():document.addEventListener?document.addEventListener("DOMContentLoaded",run):document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&run()});