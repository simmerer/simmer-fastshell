/*!
 * simmer
 * Signature creative & technical work.
 * https://simmer.ooo
 * @author David Simmer
 * @version 5.0.1
 * Copyright 2017. CC BY-NC-ND licensed.
 */
function _toConsumableArray(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function changeFavicon(t){var e=document.createElement("link"),n=document.getElementById("dynamic-favicon");e.id="dynamic-favicon",e.rel="shortcut icon",e.href="/assets/img/favicons/favicon-"+t+".ico",n&&document.head.removeChild(n),document.head.appendChild(e)}function run(){var t=document.querySelectorAll(".rellax");if(t.length>0){new Rellax(".rellax")}var e=[];Barba.Pjax.Dom.wrapperId="bw",Barba.Pjax.Dom.containerClass="bc",Barba.Pjax.start();var n=Barba.BaseTransition.extend({start:function(){Promise.all([this.newContainerLoading,this.fadeOut()]).then(this.fadeIn.bind(this))},fadeOut:function(){var t=Barba.Utils.deferred();return this.oldContainer.classList.add("fade-out"),t.resolve(),t.promise},fadeIn:function(){var t=this.newContainer,n=document.querySelector("body");n.classList=e;var i=[].concat(_toConsumableArray(e)),o=i.filter(function(t){return/client-/.test(t)})[0];if(o){var s=o.substring("client-".length);changeFavicon(s)}else changeFavicon("home");this.oldContainer.classList.add("hide"),t.classList.add("fade-in"),window.scrollTo(0,0),this.done()}});Barba.Pjax.getTransition=function(){return n},Barba.Dispatcher.on("newPageReady",function(t,n,i,o){var s=o.replace(/(<\/?)body( .+?)?>/gi,"$1notBody$2>"),r=document.createRange().createContextualFragment(s);e=r.querySelector("notBody").classList}),Barba.Dispatcher.on("transitionCompleted",function(){var t=document.querySelectorAll(".rellax");if(t.length>0){new Rellax(".rellax")}})}(function(){var t,e;this.Harvey=function(){function n(){}return n.states={},n.attach=function(e,n){var i;return this.states.hasOwnProperty(e)||(this.states[e]=[],this._add_css_for(e)),i=new t(e,null!=n?n.setup:void 0,null!=n?n.on:void 0,null!=n?n.off:void 0),this.states[e].length||this._watch_query(e),this.states[e].push(i),this._window_matchmedia(e).matches&&this._update_states([i],!0),i},n.detach=function(t){var e,n,i,o,s,r;for(s=this.states[t.condition],r=[],e=i=0,o=s.length;i<o;e=++i)n=s[e],t===n?r.push(this.states[n.condition][e]=void 0):r.push(void 0);return r},n._watch_query=function(t){var e=this;return this._window_matchmedia(t).addListener(function(n){return e._update_states(e.states[t],n.matches)})},n._update_states=function(t,e){var n,i,o,s;for(s=[],i=0,o=t.length;i<o;i++)n=t[i],e?s.push(n.activate()):s.push(n.deactivate());return s},n._mediaList={},n._window_matchmedia=function(t){return window.matchMedia&&"addListener"in window.matchMedia("all")?(t in this._mediaList||(this._mediaList[t]=window.matchMedia(t)),this._mediaList[t]):(this._listening||this._listen(),t in this._mediaList||(this._mediaList[t]=new e(t)),this._mediaList[t])},n._listen=function(){var t,e=this;return t=window.addEventListener||window.attachEvent,t("resize",function(){var t,n,i,o;i=e._mediaList,o=[];for(n in i)t=i[n],o.push(t._process());return o}),t("orientationChange",function(){var t,n,i,o;i=e._mediaList,o=[];for(n in i)t=i[n],o.push(t._process());return o}),this._listening=!0},n._add_css_for=function(t){if(this.style||(this.style=document.createElement("style"),this.style.setAttribute("type","text/css"),document.getElementsByTagName("head")[0].appendChild(this.style)),t="@media "+t+" {.harvey-test{}}",!this.style.styleSheet)return this.style.appendChild(document.createTextNode(t))},n}(),t=function(){function t(t,e,n,i){this.condition=t,this.setup=e,this.on=n,this.off=i}return t.prototype.active=!1,t.prototype.is_setup=!1,t.prototype.activate=function(){if(!this.active)return this.is_setup||("function"==typeof this.setup&&this.setup(),this.is_setup=!0),"function"==typeof this.on&&this.on(),this.active=!0},t.prototype.deactivate=function(){if(this.active)return"function"==typeof this.off&&this.off(),this.active=!1},t}(),e=function(){function t(t){this.media=t,this._listeners=[],this.matches=this._matches()}return t.prototype.addListener=function(t){this._listeners.push(t)},t.prototype._process=function(){var t,e,n,i,o,s;if(e=this._matches(),this.matches!==e){for(this.matches=e,o=this._listeners,s=[],n=0,i=o.length;n<i;n++)t=o[n],s.push(t(this));return s}},t.prototype._matches=function(){return this._tester||this._get_tester(),this._tester.innerHTML='&shy;<style media="'+this.media+'">#harvey-mq-test{width:42px;}</style>',this._tester.removeChild(this._tester.firstChild),42===this._tester.offsetWidth},t.prototype._get_tester=function(){if(this._tester=document.getElementById("harvey-mq-test"),!this._tester)return this._build_tester()},t.prototype._build_tester=function(){return this._tester=document.createElement("div"),this._tester.id="harvey-mq-test",this._tester.style.cssText="position:absolute;top:-100em",document.body.insertBefore(this._tester,document.body.firstChild)},t}()}).call(this),function(t,e){"function"==typeof define&&define.amd?define([],e):"object"==typeof module&&module.exports?module.exports=e():t.Rellax=e()}(this,function(){var t=function(e,n){"use strict";var i=Object.create(t.prototype),o=0,s=0,r=0,a=0,d=[],c=!1,u=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame||function(t){setTimeout(t,1e3/60)},l=window.transformProp||function(){var t=document.createElement("div");if(null==t.style.transform){var e=["Webkit","Moz","ms"];for(var n in e)if(void 0!==t.style[e[n]+"Transform"])return e[n]+"Transform"}return"transform"}(),h=function(t,e,n){return t<=e?e:t>=n?n:t};i.options={speed:-2,center:!1,round:!0,vertical:!0,horizontal:!1,callback:function(){}},n&&Object.keys(n).forEach(function(t){i.options[t]=n[t]}),i.options.speed=h(i.options.speed,-10,10),e||(e=".rellax");var f=document.querySelectorAll(e);if(!(f.length>0))throw new Error("The elements you're trying to select don't exist.");i.elems=f;var m=function(){s=window.innerHeight,a=window.innerWidth,y();for(var t=0;t<i.elems.length;t++){var e=p(i.elems[t]);d.push(e)}window.addEventListener("resize",function(){w()}),_(),w()},p=function(t){var e=t.getAttribute("data-rellax-percentage"),n=t.getAttribute("data-rellax-speed"),o=t.getAttribute("data-rellax-zindex")||0,r=i.options.vertical&&(e||i.options.center)?window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop:0,d=i.options.horizontal&&(e||i.options.center)?window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft:0,c=r+t.getBoundingClientRect().top,u=t.clientHeight||t.offsetHeight||t.scrollHeight,l=d+t.getBoundingClientRect().left,f=t.clientWidth||t.offsetWidth||t.scrollWidth,m=e?e:(r-c+s)/(u+s),p=e?e:(d-l+a)/(f+a);i.options.center&&(p=.5,m=.5);var y=n?h(n,-10,10):i.options.speed;(e||i.options.center)&&(y=h(n||i.options.speed,-5,5));var _=v(p,m,y),w=t.style.cssText,g="";if(w.indexOf("transform")>=0){var b=w.indexOf("transform"),x=w.slice(b),L=x.indexOf(";");g=L?" "+x.slice(11,L).replace(/\s/g,""):" "+x.slice(11).replace(/\s/g,"")}return{baseX:_.x,baseY:_.y,top:c,left:l,height:u,width:f,speed:y,style:w,transform:g,zindex:o}},y=function(){var t=o,e=r;return o=void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop,r=void 0!==window.pageXOffset?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft,!(t==o||!i.options.vertical)||!(e==r||!i.options.horizontal)},v=function(t,e,n){var o={},s=n*(100*(1-t)),r=n*(100*(1-e));return o.x=i.options.round?Math.round(s):Math.round(100*s)/100,o.y=i.options.round?Math.round(r):Math.round(100*r)/100,o},_=function(){y()&&c===!1&&w(),u(_)},w=function(){for(var t=0;t<i.elems.length;t++){var e=(o-d[t].top+s)/(d[t].height+s),n=(r-d[t].left+a)/(d[t].width+a),c=v(n,e,d[t].speed),u=c.y-d[t].baseY,h=c.x-d[t].baseX,f=d[t].zindex,m="translate3d("+(i.options.horizontal?h:"0")+"px,"+(i.options.vertical?u:"0")+"px,"+f+"px) "+d[t].transform;i.elems[t].style[l]=m}i.options.callback(c)};return i.destroy=function(){for(var t=0;t<i.elems.length;t++)i.elems[t].style.cssText=d[t].style;c=!0},m(),i};return t}),document.head||(document.head=document.getElementsByTagName("head")[0]),"loading"!==document.readyState?run():document.addEventListener?document.addEventListener("DOMContentLoaded",run):document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&run()});